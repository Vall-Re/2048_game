{"mappings":"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","sources":["<anon>","src/scripts/main.js","src/modules/Game.class.js"],"sourcesContent":["\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\nvar $a5fd07fa01589658$exports = {};\n\"use strict\";\n/**\n * This class represents the game.\n * Now it has a basic structure, that is needed for testing.\n * Feel free to add more props and methods if needed.\n */ class $a5fd07fa01589658$var$Game {\n    /**\n   * Creates a new game instance.\n   *\n   * @param {number[][]} initialState\n   * The initial state of the board.\n   * @default\n   * [[0, 0, 0, 0],\n   *  [0, 0, 0, 0],\n   *  [0, 0, 0, 0],\n   *  [0, 0, 0, 0]]\n   *\n   * If passed, the board will be initialized with the provided\n   * initial state.\n   */ #board;\n    #score;\n    #status;\n    #initialState;\n    constructor(initialState){\n        this.#initialState = initialState || this.#createEmptyBoard();\n        this.#board = JSON.parse(JSON.stringify(this.#initialState));\n        this.#score = 0;\n        this.#status = \"idle\"; // 'idle' / 'playing' / 'win' / 'lose'\n        // eslint-disable-next-line no-console\n        console.log(initialState);\n    }\n    moveLeft() {\n        this.#move(\"left\");\n    }\n    moveRight() {\n        this.#move(\"right\");\n    }\n    moveUp() {\n        this.#move(\"up\");\n    }\n    moveDown() {\n        this.#move(\"down\");\n    }\n    /**\n   * @returns {number}\n   */ getScore() {\n        return this.#score;\n    }\n    /**\n   * @returns {number[][]}\n   */ getState() {\n        return JSON.parse(JSON.stringify(this.#board));\n    }\n    /**\n   * Returns the current game status.\n   *\n   * @returns {string} One of: 'idle', 'playing', 'win', 'lose'\n   *\n   * `idle` - the game has not started yet (the initial state);\n   * `playing` - the game is in progress;\n   * `win` - the game is won;\n   * `lose` - the game is lost\n   */ getStatus() {\n        return this.#status;\n    }\n    /**\n   * Starts the game.\n   */ start() {\n        if (this.#status === \"idle\" || this.#status === \"lose\") {\n            this.#board = JSON.parse(JSON.stringify(this.#initialState));\n            this.#addRandomTile();\n            this.#addRandomTile();\n            this.#score = 0;\n            this.#status = \"playing\";\n        }\n    }\n    /**\n   * Resets the game.\n   */ restart() {\n        this.#board = JSON.parse(JSON.stringify(this.#initialState));\n        this.#score = 0;\n        this.#status = \"playing\";\n        this.#addRandomTile();\n        this.#addRandomTile();\n    }\n    // Add your own methods here\n    #createEmptyBoard() {\n        return Array.from({\n            length: 4\n        }, ()=>Array(4).fill(0));\n    }\n    #addRandomTile() {\n        const emptyCell = [];\n        for(let r = 0; r < 4; r++){\n            for(let c = 0; c < 4; c++)if (this.#board[r][c] === 0) emptyCell.push([\n                r,\n                c\n            ]);\n        }\n        if (emptyCell.length === 0) return;\n        const [row, col] = emptyCell[Math.floor(Math.random() * emptyCell.length)];\n        const value = Math.random() < 0.9 ? 2 : 4;\n        this.#board[row][col] = value;\n    }\n    #compressAndMerge(row) {\n        const original = [\n            ...row\n        ];\n        const nonZero = row.filter((v)=>v !== 0);\n        const newRow = [];\n        let scoreGained = 0;\n        for(let i = 0; i < nonZero.length; i++)if (nonZero[i] === nonZero[i + 1]) {\n            const merged = nonZero[i] * 2;\n            newRow.push(merged);\n            scoreGained += merged;\n            i++;\n        } else newRow.push(nonZero[i]);\n        while(newRow.length < 4)newRow.push(0);\n        const changed = JSON.stringify(original) !== JSON.stringify(newRow);\n        return {\n            newRow: newRow,\n            scoreGained: scoreGained,\n            changed: changed\n        };\n    }\n    #move(direction) {\n        if (this.#status !== \"playing\") return;\n        const clone = (b)=>JSON.parse(JSON.stringify(b));\n        const reverseRows = (m)=>m.map((r)=>[\n                    ...r\n                ].reverse());\n        const transpose = (m)=>m[0].map((_, i)=>m.map((r)=>r[i]));\n        let board = clone(this.#board);\n        let moved = false;\n        let gainedScore = 0;\n        // нормалізація: робимо всі рухи \"вліво\"\n        if (direction === \"right\") board = reverseRows(board);\n        else if (direction === \"up\") board = transpose(board);\n        else if (direction === \"down\") {\n            board = transpose(board);\n            board = reverseRows(board);\n        }\n        const newBoard = board.map((row)=>{\n            const { newRow: newRow, scoreGained: scoreGained, changed: changed } = this.#compressAndMerge(row);\n            if (changed) moved = true;\n            gainedScore += scoreGained;\n            return newRow;\n        });\n        // повертаємо матрицю у початкову орієнтацію\n        let result = newBoard;\n        if (direction === \"right\") result = reverseRows(result);\n        else if (direction === \"up\") result = transpose(result);\n        else if (direction === \"down\") {\n            result = reverseRows(result);\n            result = transpose(result);\n        }\n        const prev = JSON.stringify(this.#board);\n        this.#board = result;\n        this.#score += gainedScore;\n        if (moved && prev !== JSON.stringify(this.#board)) {\n            this.#checkWin();\n            if (this.#status !== \"win\") this.#addRandomTile();\n            this.#checkLose();\n        }\n    }\n    #checkWin() {\n        for (const row of this.#board)if (row.includes(2048)) {\n            this.#status = \"win\";\n            return;\n        }\n    }\n    #checkLose() {\n        if (this.#board.flat().includes(0)) return;\n        for(let row = 0; row < 4; row++)for(let col = 0; col < 4; col++){\n            const val = this.#board[row][col];\n            if (row < 3 && this.#board[row + 1][col] === val || col < 3 && this.#board[row][col + 1] === val) return;\n        }\n        this.#status = \"lose\";\n    }\n}\n$a5fd07fa01589658$exports = $a5fd07fa01589658$var$Game;\n\n\n\"use strict\";\nconst $09e991522ca7e64e$var$game = new (0, (/*@__PURE__*/$parcel$interopDefault($a5fd07fa01589658$exports)))();\n// Write your code here\n// DOM elements\nconst $09e991522ca7e64e$var$startButton = document.querySelector(\".button\");\nconst $09e991522ca7e64e$var$scoreElement = document.querySelector(\".game-score\");\nconst $09e991522ca7e64e$var$cells = document.querySelectorAll(\".field-cell\");\nconst $09e991522ca7e64e$var$messageStart = document.querySelector(\".message-start\");\nconst $09e991522ca7e64e$var$messageWin = document.querySelector(\".message-win\");\nconst $09e991522ca7e64e$var$messageLose = document.querySelector(\".message-lose\");\nfunction $09e991522ca7e64e$var$renderBoard() {\n    const state = $09e991522ca7e64e$var$game.getState().flat();\n    $09e991522ca7e64e$var$cells.forEach((cell, i)=>{\n        const value = state[i];\n        cell.textContent = value || \"\";\n        cell.className = \"field-cell\";\n        if (value) cell.classList.add(`field-cell--${value}`);\n    });\n    $09e991522ca7e64e$var$scoreElement.textContent = $09e991522ca7e64e$var$game.getScore();\n    $09e991522ca7e64e$var$messageStart.classList.add(\"hidden\");\n    $09e991522ca7e64e$var$messageWin.classList.add(\"hidden\");\n    $09e991522ca7e64e$var$messageLose.classList.add(\"hidden\");\n    const statusGame = $09e991522ca7e64e$var$game.getStatus();\n    if (statusGame === \"idle\") $09e991522ca7e64e$var$messageStart.classList.remove(\"hidden\");\n    else if (statusGame === \"win\") $09e991522ca7e64e$var$messageWin.classList.remove(\"hidden\");\n    else if (statusGame === \"lose\") $09e991522ca7e64e$var$messageLose.classList.remove(\"hidden\");\n}\n// button Start/Restart\n$09e991522ca7e64e$var$startButton.addEventListener(\"click\", ()=>{\n    if ($09e991522ca7e64e$var$game.getStatus() === \"idle\") {\n        $09e991522ca7e64e$var$game.start();\n        $09e991522ca7e64e$var$startButton.textContent = \"Restart\";\n        $09e991522ca7e64e$var$startButton.classList.remove(\"start\");\n        $09e991522ca7e64e$var$startButton.classList.add(\"restart\");\n    } else $09e991522ca7e64e$var$game.restart();\n    $09e991522ca7e64e$var$renderBoard();\n});\n// keyboard\ndocument.addEventListener(\"keydown\", (ev)=>{\n    switch(ev.key){\n        case \"ArrowLeft\":\n            $09e991522ca7e64e$var$game.moveLeft();\n            break;\n        case \"ArrowRight\":\n            $09e991522ca7e64e$var$game.moveRight();\n            break;\n        case \"ArrowUp\":\n            $09e991522ca7e64e$var$game.moveUp();\n            break;\n        case \"ArrowDown\":\n            $09e991522ca7e64e$var$game.moveDown();\n            break;\n        default:\n            return;\n    }\n    $09e991522ca7e64e$var$renderBoard();\n});\n$09e991522ca7e64e$var$renderBoard();\n\n\n//# sourceMappingURL=index.dac91743.js.map\n","'use strict';\n\n// Uncomment the next lines to use your game instance in the browser\n// const Game = require('../modules/Game.class');\nimport Game from '../modules/Game.class';\n\nconst game = new Game();\n\n// Write your code here\n\n// DOM elements\nconst startButton = document.querySelector('.button');\nconst scoreElement = document.querySelector('.game-score');\nconst cells = document.querySelectorAll('.field-cell');\nconst messageStart = document.querySelector('.message-start');\nconst messageWin = document.querySelector('.message-win');\nconst messageLose = document.querySelector('.message-lose');\n\nfunction renderBoard() {\n  const state = game.getState().flat();\n\n  cells.forEach((cell, i) => {\n    const value = state[i];\n\n    cell.textContent = value || '';\n    cell.className = 'field-cell';\n\n    if (value) {\n      cell.classList.add(`field-cell--${value}`);\n    }\n  });\n\n  scoreElement.textContent = game.getScore();\n\n  messageStart.classList.add('hidden');\n  messageWin.classList.add('hidden');\n  messageLose.classList.add('hidden');\n\n  const statusGame = game.getStatus();\n\n  if (statusGame === 'idle') {\n    messageStart.classList.remove('hidden');\n  } else if (statusGame === 'win') {\n    messageWin.classList.remove('hidden');\n  } else if (statusGame === 'lose') {\n    messageLose.classList.remove('hidden');\n  }\n}\n\n// button Start/Restart\nstartButton.addEventListener('click', () => {\n  if (game.getStatus() === 'idle') {\n    game.start();\n    startButton.textContent = 'Restart';\n    startButton.classList.remove('start');\n    startButton.classList.add('restart');\n  } else {\n    game.restart();\n  }\n  renderBoard();\n});\n\n// keyboard\n\ndocument.addEventListener('keydown', (ev) => {\n  switch (ev.key) {\n    case 'ArrowLeft':\n      game.moveLeft();\n      break;\n    case 'ArrowRight':\n      game.moveRight();\n      break;\n    case 'ArrowUp':\n      game.moveUp();\n      break;\n    case 'ArrowDown':\n      game.moveDown();\n      break;\n    default:\n      return;\n  }\n  renderBoard();\n});\n\nrenderBoard();\n","'use strict';\n\n/**\n * This class represents the game.\n * Now it has a basic structure, that is needed for testing.\n * Feel free to add more props and methods if needed.\n */\nclass Game {\n  /**\n   * Creates a new game instance.\n   *\n   * @param {number[][]} initialState\n   * The initial state of the board.\n   * @default\n   * [[0, 0, 0, 0],\n   *  [0, 0, 0, 0],\n   *  [0, 0, 0, 0],\n   *  [0, 0, 0, 0]]\n   *\n   * If passed, the board will be initialized with the provided\n   * initial state.\n   */\n\n  #board;\n  #score;\n  #status;\n  #initialState;\n\n  constructor(initialState) {\n    this.#initialState = initialState || this.#createEmptyBoard();\n    this.#board = JSON.parse(JSON.stringify(this.#initialState));\n    this.#score = 0;\n    this.#status = 'idle'; // 'idle' / 'playing' / 'win' / 'lose'\n    // eslint-disable-next-line no-console\n    console.log(initialState);\n  }\n\n  moveLeft() {\n    this.#move('left');\n  }\n  moveRight() {\n    this.#move('right');\n  }\n  moveUp() {\n    this.#move('up');\n  }\n  moveDown() {\n    this.#move('down');\n  }\n\n  /**\n   * @returns {number}\n   */\n  getScore() {\n    return this.#score;\n  }\n\n  /**\n   * @returns {number[][]}\n   */\n  getState() {\n    return JSON.parse(JSON.stringify(this.#board));\n  }\n\n  /**\n   * Returns the current game status.\n   *\n   * @returns {string} One of: 'idle', 'playing', 'win', 'lose'\n   *\n   * `idle` - the game has not started yet (the initial state);\n   * `playing` - the game is in progress;\n   * `win` - the game is won;\n   * `lose` - the game is lost\n   */\n  getStatus() {\n    return this.#status;\n  }\n\n  /**\n   * Starts the game.\n   */\n  start() {\n    if (this.#status === 'idle' || this.#status === 'lose') {\n      this.#board = JSON.parse(JSON.stringify(this.#initialState));\n      this.#addRandomTile();\n      this.#addRandomTile();\n      this.#score = 0;\n      this.#status = 'playing';\n    }\n  }\n  /**\n   * Resets the game.\n   */\n  restart() {\n    this.#board = JSON.parse(JSON.stringify(this.#initialState));\n    this.#score = 0;\n    this.#status = 'playing';\n    this.#addRandomTile();\n    this.#addRandomTile();\n  }\n\n  // Add your own methods here\n\n  #createEmptyBoard() {\n    return Array.from({ length: 4 }, () => Array(4).fill(0));\n  }\n\n  #addRandomTile() {\n    const emptyCell = [];\n\n    for (let r = 0; r < 4; r++) {\n      for (let c = 0; c < 4; c++) {\n        if (this.#board[r][c] === 0) {\n          emptyCell.push([r, c]);\n        }\n      }\n    }\n\n    if (emptyCell.length === 0) {\n      return;\n    }\n\n    const [row, col] = emptyCell[Math.floor(Math.random() * emptyCell.length)];\n    const value = Math.random() < 0.9 ? 2 : 4;\n\n    this.#board[row][col] = value;\n  }\n\n  #compressAndMerge(row) {\n    const original = [...row];\n    const nonZero = row.filter((v) => v !== 0);\n    const newRow = [];\n    let scoreGained = 0;\n\n    for (let i = 0; i < nonZero.length; i++) {\n      if (nonZero[i] === nonZero[i + 1]) {\n        const merged = nonZero[i] * 2;\n\n        newRow.push(merged);\n        scoreGained += merged;\n        i++;\n      } else {\n        newRow.push(nonZero[i]);\n      }\n    }\n\n    while (newRow.length < 4) {\n      newRow.push(0);\n    }\n\n    const changed = JSON.stringify(original) !== JSON.stringify(newRow);\n\n    return { newRow, scoreGained, changed };\n  }\n\n  #move(direction) {\n    if (this.#status !== 'playing') {\n      return;\n    }\n\n    const clone = (b) => JSON.parse(JSON.stringify(b));\n    const reverseRows = (m) => m.map((r) => [...r].reverse());\n    const transpose = (m) => m[0].map((_, i) => m.map((r) => r[i]));\n\n    let board = clone(this.#board);\n    let moved = false;\n    let gainedScore = 0;\n\n    // нормалізація: робимо всі рухи \"вліво\"\n    if (direction === 'right') {\n      board = reverseRows(board);\n    } else if (direction === 'up') {\n      board = transpose(board);\n    } else if (direction === 'down') {\n      board = transpose(board);\n      board = reverseRows(board);\n    }\n\n    const newBoard = board.map((row) => {\n      const { newRow, scoreGained, changed } = this.#compressAndMerge(row);\n\n      if (changed) {\n        moved = true;\n      }\n      gainedScore += scoreGained;\n\n      return newRow;\n    });\n\n    // повертаємо матрицю у початкову орієнтацію\n    let result = newBoard;\n\n    if (direction === 'right') {\n      result = reverseRows(result);\n    } else if (direction === 'up') {\n      result = transpose(result);\n    } else if (direction === 'down') {\n      result = reverseRows(result);\n      result = transpose(result);\n    }\n\n    const prev = JSON.stringify(this.#board);\n\n    this.#board = result;\n    this.#score += gainedScore;\n\n    if (moved && prev !== JSON.stringify(this.#board)) {\n      this.#checkWin();\n\n      if (this.#status !== 'win') {\n        this.#addRandomTile();\n      }\n\n      this.#checkLose();\n    }\n  }\n\n  #checkWin() {\n    for (const row of this.#board) {\n      if (row.includes(2048)) {\n        this.#status = 'win';\n\n        return;\n      }\n    }\n  }\n\n  #checkLose() {\n    if (this.#board.flat().includes(0)) {\n      return;\n    }\n\n    for (let row = 0; row < 4; row++) {\n      for (let col = 0; col < 4; col++) {\n        const val = this.#board[row][col];\n\n        if (\n          (row < 3 && this.#board[row + 1][col] === val) ||\n          (col < 3 && this.#board[row][col + 1] === val)\n        ) {\n          return;\n        }\n      }\n    }\n    this.#status = 'lose';\n  }\n}\n\nmodule.exports = Game;\n"],"names":["a","$a5fd07fa01589658$exports","$09e991522ca7e64e$var$game","constructor","initialState","JSON","parse","stringify","console","log","moveLeft","moveRight","moveUp","moveDown","getScore","getState","getStatus","start","restart","Array","from","length","fill","emptyCell","r","c","push","row","col","Math","floor","random","value","original","nonZero","filter","v","newRow","scoreGained","i","merged","changed","direction","reverseRows","m","map","reverse","transpose","_","board","moved","gainedScore","result","prev","includes","flat","val","__esModule","default","$09e991522ca7e64e$var$startButton","document","querySelector","$09e991522ca7e64e$var$scoreElement","$09e991522ca7e64e$var$cells","querySelectorAll","$09e991522ca7e64e$var$messageStart","$09e991522ca7e64e$var$messageWin","$09e991522ca7e64e$var$messageLose","$09e991522ca7e64e$var$renderBoard","state","forEach","cell","textContent","className","classList","add","statusGame","remove","addEventListener","ev","key"],"version":3,"file":"index.dac91743.js.map"}